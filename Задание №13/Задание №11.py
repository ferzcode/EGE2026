# –°–µ—Ç—å, –≤ –∫–æ—Ç–æ—Ä–æ–π —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —É–∑–µ–ª —Å IP-–∞–¥—Ä–µ—Å–æ–º 246.51.128.202, –∑–∞–¥–∞–Ω–∞ –º–∞—Å–∫–æ–π —Å–µ—Ç–∏ 255.255.ùê¥.0, –≥–¥–µ ùê¥ - –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ø—É—Å—Ç–∏–º–æ–µ –¥–ª—è –∑–∞–ø–∏—Å–∏ –º–∞—Å–∫–∏ —á–∏—Å–ª–æ.
#
# –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ùê¥, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–ª—è –≤—Å–µ—Ö IP-–∞–¥—Ä–µ—Å–æ–≤ —ç—Ç–æ–π —Å–µ—Ç–∏ –≤ –¥–≤–æ–∏—á–Ω–æ–π –∑–∞–ø–∏—Å–∏
# IP-–∞–¥—Ä–µ—Å–∞ —Å—É–º–º–∞—Ä–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω—É–ª–µ–π –≤ –ª–µ–≤—ã—Ö –¥–≤—É—Ö –±–∞–π—Ç–∞—Ö –Ω–µ –±–æ–ª–µ–µ —Å—É–º–º–∞—Ä–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –Ω—É–ª–µ–π –≤ –ø—Ä–∞–≤—ã—Ö –¥–≤—É—Ö –±–∞–π—Ç–∞—Ö.
#
# –í –æ—Ç–≤–µ—Ç–µ —É–∫–∞–∂–∏—Ç–µ —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ.

from ipaddress import *

# 1 –°–ü–û–°–û–ë

param = [255, 254, 252, 248, 240, 224, 192, 128, 0]
for A in param:
    net = ip_network(f'246.51.128.202/255.255.{A}.0', False)

    c = 0
    for ip in net:
        binary = bin(int(ip))[2:].zfill(32)
        if binary[:16].count('0') <= binary[16:].count('0'):
            c += 1

    if c == len(set(net)):
        print(A)

# 2 –°–ü–û–°–û–ë

def proverka(ip):
    binary = bin(int(ip))[2:].zfill(32)
    return binary[:16].count('0') <= binary[16:].count('0')

for A in param:
    net = ip_network(f'246.51.128.202/255.255.{A}.0', False)

    if all(proverka(ip) == 1 for ip in net):
        print(A)